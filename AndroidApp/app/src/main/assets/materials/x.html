<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="katex.min.css">
    <script defer src="katex.min.js"></script>
    <script defer src="auto-render.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
          renderMathInElement(document.body, {
            delimiters: [
              {left: "$$", right: "$$", display: true},
              {left: "$", right: "$", display: false}
            ]
          });
        });
    </script>
    <style>
        body {
  font-family: "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;
  background-color: {{background}};
  padding: 24px;
  color: {{text}};
  line-height: 1.6;
  -webkit-overflow-scrolling: touch;
  touch-action: auto;
  overflow-y: auto;
  -webkit-user-select: text;
  user-select: text;
}

html {
  -webkit-overflow-scrolling: touch;
  touch-action: auto;
  overflow-y: auto;
}

h1 {
  font-size: 1.8em;
  margin-bottom: 0.6em;
}

h2 {
  font-size: 1.3em;
  margin-top: 1.4em;
}

p, ul {
  font-size: 1.05em;
}

ul {
  padding-left: 1.2em;
}

.math-inline {
  font-weight: 600;
  color: {{math}};
}

.info-block {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  background-color: {{infoBackground}};
  padding: 12px 14px;
  border-left: 4px solid {{infoBorder}};
  margin: 12px 0;
  border-radius: 6px;
  font-size: 1em;
  line-height: 1.5;
}

.info-block .icon {
  font-size: 1.3em;
  margin-top: 2px;
}

.info-block.info      { border-left-color: {{info}}; }
.info-block.warning   { border-left-color: {{warning}}; }
.info-block.task      { border-left-color: {{task}}; }
.info-block.question  { border-left-color: {{question}}; }
.info-block.reference { border-left-color: {{reference}} }
.info-block.hint      { border-left-color: {{hint}}; }
.info-block.term      { border-left-color: {{term}}; }
    </style>
</head>
<body>
        <main style="font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; line-height: 1.6;">

            <!-- –õ–µ–∫—Ü—ñ–π–Ω–∏–π –±–ª–æ–∫ -->
            <section id="lecture-section" style="background-color: #e3f2fd; border-radius: 12px; padding: 16px;">
                <h1 style="color: #1565c0;">üî¢ –©–æ —Ç–∞–∫–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ñ —á–∏—Å–ª–∞?</h1>
                <p>–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ñ —á–∏—Å–ª–∞ ‚Äî —Ü–µ –∑–≤–∏—á–∞–π–Ω—ñ —á–∏—Å–ª–∞, —è–∫–∏–º–∏ –º–∏ —Ä–∞—Ö—É—î–º–æ –ø—Ä–µ–¥–º–µ—Ç–∏: <strong>1, 2, 3, 4, 5...</strong></p>
                <p>–í–æ–Ω–∏ –∑–∞–≤–∂–¥–∏ –¥–æ–¥–∞—Ç–Ω—ñ —ñ –Ω–µ –º—ñ—Å—Ç—è—Ç—å –¥—Ä–æ–±—ñ–≤ —á–∏ –Ω—É–ª—è.</p>
                <h3>üìå –ü—Ä–∏–∫–ª–∞–¥–∏ –∑ –∂–∏—Ç—Ç—è:</h3>
                <ul>
                    <li>3 –æ–ª—ñ–≤—Ü—ñ</li>
                    <li>12 –∫–Ω–∏–≥</li>
                    <li>26 —É—á–Ω—ñ–≤ —É –∫–ª–∞—Å—ñ</li>
                </ul>
                <button id="go-to-test" style="margin-top: 20px; padding: 10px 20px; font-size: 1em; background-color: #1565c0; color: white; border: none; border-radius: 8px; cursor: pointer;">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Ç–µ—Å—Ç—É</button>
            </section>

            <!-- –¢–µ—Å—Ç–æ–≤–∏–π –±–ª–æ–∫ -->
            <section id="test-section" style="display: none; margin-top: 20px;">
                <h2 style="color: #2e7d32;">üß™ –¢–µ—Å—Ç: –ü–µ—Ä–µ–≤—ñ—Ä —Å–≤–æ—ó –∑–Ω–∞–Ω–Ω—è</h2>
                <form id="quiz-form" style="margin-top: 10px;">

                    <!-- –í–∞—Ä—ñ–∞–Ω—Ç 1 -->
                    <div class="quiz-variant" id="variant-1" style="display:none;">
                        <ol>
                            <li>–©–æ —Ç–∞–∫–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ñ —á–∏—Å–ª–∞?</li>
                            <label><input type="radio" name="q1" value="A" data-correct="true"> –ß–∏—Å–ª–∞ –¥–ª—è –ª—ñ—á–±–∏</label><br>
                            <label><input type="radio" name="q1" value="B"> –í—ñ–¥‚Äô—î–º–Ω—ñ —á–∏—Å–ª–∞</label><br>
                            <label><input type="radio" name="q1" value="C"> –î—Ä–æ–±–æ–≤—ñ —á–∏—Å–ª–∞</label><br><br>

                            <li>–Ø–∫–µ —á–∏—Å–ª–æ –Ω–µ —î –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∏–º?</li>
                            <label><input type="radio" name="q2" value="A"> 5</label><br>
                            <label><input type="radio" name="q2" value="B" data-correct="true"> 0</label><br>
                            <label><input type="radio" name="q2" value="C"> 17</label><br>
                        </ol>
                    </div>

                    <!-- –í–∞—Ä—ñ–∞–Ω—Ç 2 -->
                    <div class="quiz-variant" id="variant-2" style="display:none;">
                        <ol>
                            <li>–ù–∞–π–º–µ–Ω—à–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–µ —á–∏—Å–ª–æ:</li>
                            <label><input type="radio" name="q1" value="A"> 0</label><br>
                            <label><input type="radio" name="q1" value="B" data-correct="true"> 1</label><br>
                            <label><input type="radio" name="q1" value="C"> ‚Äì1</label><br><br>

                            <li>–Ø–∫–µ –∑ —á–∏—Å–µ–ª —î –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–∏–º?</li>
                            <label><input type="radio" name="q2" value="A"> ‚Äì5</label><br>
                            <label><input type="radio" name="q2" value="B"> 0</label><br>
                            <label><input type="radio" name="q2" value="C" data-correct="true"> 12</label><br>
                        </ol>
                    </div>

                    <!-- –í–∞—Ä—ñ–∞–Ω—Ç 3 -->
                    <div class="quiz-variant" id="variant-3" style="display:none;">
                        <ol>
                            <li>–î–ª—è —á–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ñ —á–∏—Å–ª–∞?</li>
                            <label><input type="radio" name="q1" value="A" data-correct="true"> –©–æ–± —Ä–∞—Ö—É–≤–∞—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–∏</label><br>
                            <label><input type="radio" name="q1" value="B"> –©–æ–± –º–∞–ª—é–≤–∞—Ç–∏</label><br>
                            <label><input type="radio" name="q1" value="C"> –©–æ–± –ø–∏—Å–∞—Ç–∏ –ø—ñ—Å–Ω—ñ</label><br><br>

                            <li>–ü–æ–∑–Ω–∞—á –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–µ —á–∏—Å–ª–æ:</li>
                            <label><input type="radio" name="q2" value="A"> ‚Äì3</label><br>
                            <label><input type="radio" name="q2" value="B" data-correct="true"> 2</label><br>
                            <label><input type="radio" name="q2" value="C"> 0</label><br>
                        </ol>
                    </div>

                    <button type="button" id="check-test" style="margin-top: 20px; padding: 10px 20px; font-size: 1em; background-color: #2e7d32; color: white; border: none; border-radius: 8px; cursor: pointer;">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
                </form>
            </section>
        </main>

        <script>
            const goToTestBtn = document.getElementById('go-to-test');
            const lectureSection = document.getElementById('lecture-section');
            const testSection = document.getElementById('test-section');
            const variants = document.querySelectorAll('.quiz-variant');

            // –ü—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –∫–Ω–æ–ø–∫–∏ ‚Äì –ø–æ–∫–∞–∑–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç —Ç–µ—Å—Ç—É
            goToTestBtn.addEventListener('click', () => {
              lectureSection.style.display = 'none';
              testSection.style.display = 'block';
              const randomIndex = Math.floor(Math.random() * variants.length);
              variants[randomIndex].style.display = 'block';
            });

            // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
            document.getElementById('check-test').addEventListener('click', () => {
              let correct = 0;
              let total = 0;
              const activeVariant = document.querySelector('.quiz-variant[style*="display: block"]');
              const inputs = activeVariant.querySelectorAll('input[type="radio"]');

              // –ó–±–∏—Ä–∞—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
              const answers = {};
              inputs.forEach(input => {
                if (input.checked) {
                  answers[input.name] = input.value;
                }
              });

              // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ
              const groups = new Set(Array.from(inputs).map(i => i.name));
              groups.forEach(name => {
                const selected = activeVariant.querySelector(`input[name="${name}"]:checked`);
                if (selected && selected.dataset.correct === "true") {
                  correct++;
                }
                total++;
              });

              const passed = correct === total;
              const result = {
                correct,
                total,
                passed
              };

              // –ù–∞–¥—Å–∏–ª–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ Android
              if (window.AndroidBridge) {
                AndroidBridge.sendMessage(JSON.stringify(result));
              } else {
                alert(`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${correct} –∑ ${total}. –ü—Ä–æ–π–¥–µ–Ω–æ: ${passed}`);
              }
            });
        </script>
        </body>
</html>
